<ng-container
*ngTemplateOutlet="isArray ? arrayTpl : zoneTpl; context: { $implicit: data, first: 'true' }"
></ng-container>

<!-- data is an array -->
<ng-template #arrayTpl let-data>
  <ng-container *ngFor="let d of data; let index = index; let first = first"
    [ngTemplateOutlet]="zoneTpl"
    [ngTemplateOutletContext]="{ $implicit: data, index, first }">
  </ng-container>
</ng-template>

<!-- data is a single object -->
<ng-template #zoneTpl let-data let-index="index" let-first="first">

    <!-- en mode editeur -->
    <uib-item *ngIf="first && (enabled$ | async)" class="uib-zone"
      [uib-item]="id"
      [id]="id"
      [zone]="id"
      [templates]="templates"
      [configurable]="true"

      uib-configurable

      [data]="data"
      [dataIndex]="index"
      [conditionsData]="conditionsData"

      [attr.data-zone]="id"
      >
    </uib-item>

    <!-- en mode normal -->
    <uib-item *ngIf="!first || (enabled$ | async) === false"
      [uib-item]="id"
      [id]="id"
      [templates]="templates"
      [configurable]="false"

      [ngClass]="config.classes"


      [data]="data"
      [dataIndex]="index"
      [conditionsData]="conditionsData"

      (click)="onItemClicked($event, data, index)">
    </uib-item>
</ng-template>
